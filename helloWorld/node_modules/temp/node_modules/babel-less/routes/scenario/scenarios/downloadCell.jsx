import React from 'react';
import PropTypes from 'prop-types';
// eslint-disable-next-line import/no-unresolved
import reactToolboxTheme from 'react-toolbox/tmp/theme.json';
import { Glyphicon, Tooltip, OverlayTrigger } from 'react-bootstrap';

const DownloadCell = configuration => ({ params: { node } }) => {
  const href = configuration.raveBatchManagementDownload.replace(
    'ID_PLACEHOLDER',
    node.data.id
  );
  const fileName = `${node.data.scenarioName}_${node.data.updated}.csv`;
  const tooltip = <Tooltip id="tooltip">Download Scenario File</Tooltip>;

  return (
    <OverlayTrigger placement="top" overlay={tooltip}>
      <a href={href} download={fileName}>
        <Glyphicon glyph="download-alt" className="scenarios__download-cell" />
      </a>
    </OverlayTrigger>
  );
};

DownloadCell.propTypes = {
  params: PropTypes.shape({
    node: PropTypes.shape({
      data: PropTypes.shape({
        scenarioName: PropTypes.string.isRequired,
        updated: PropTypes.oneOfType([PropTypes.string, PropTypes.number])
          .isRequired,
      }).isRequired,
    }).isRequired,
  }).isRequired,
};

export default DownloadCell;
